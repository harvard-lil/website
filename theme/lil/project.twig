{% extends "base.html" %}

{% block body_tag %}<body class="category _project">{% endblock %}
{% block content %}

{% set project = record %}
    <header>
    	{% include '_nav.twig' %}
    </header>

    
    <section class="container">
	    <nav class="intro-nav">
		    <a class="intro-nav-previous">Previous</a>
		    <a class="intro-nav-next">Next</a>
	    </nav>
	    <div class="intro-category">category</div>
	    <h1 class="intro-title">{{ project.name }}</h1>
	    <div class="slice">
		    <h3 class="slice-hook">What’s this project?</h3>
		    <div class="slice-main">
			    <p><a href="{{ project.website }}">{{ project.name }}</a></p>
			</div>
		</div>
	    <div class="slice">
		    <h3 class="slice-hook">What does it do?</h3>
		    <div class="slice-main">
			    <p>{{ project.logline }}</p>
			</div>
		</div>
	    <div class="slice">
		    <h3 class="slice-hook">Why does it exist?</h3>
		    <div class="slice-main">
			    <p>{{ project.description }}</p>
			</div>
		</div>
 		<a href="{{ project.github_repo }}" role="button" class="github" aria-label="{{ project.name }} on Github">{{ project.name }} on Github</a>

	    <!-- using <picture> element to art direct for wide/narrow screens -->
		<picture class="slider-slide-primaryImage">
			<!-- wide crop -->
			{# <source
				media="(min-width: {{ vars.respond.tabletWidth }}em)"
				srcset="{{ project.primaryImage.wide.small }} {{ vars.respond.tabletWidth }}w,
				        {{ project.primaryImage.wide.medium }} {{ vars.respond.wideWidth }}w,
				        {{ project.primaryImage.wide.large }} {{ vars.respond.wideWidth * 2 }}w" />
			<!-- narrow crop -->
			<source
				srcset="{{ project.primaryImage.mobile.1x 1x }},
				        {{ project.primaryImage.mobile.2x 2x }}" />
			<img
				src="{{ project.primaryImage.mobile.1x }}"
				alt="{{ project.image.alt }}" />#}
		</picture>
		
		<div class="slice">
		    <h3 class="slice-hook">Who contributed to this project?</h3>
		    <div class="slice-main">
		        {% set relatedpeople = record.related('about') %}
			    {% for contributor in relatedpeople %}
			    	<a class="contributor" href="{{paths.root}}about#{{ contributor.slug }}">
			    		<figure class="contributor-primaryImage">
			    			{# <img src="{{ contributor.primaryImage.1x }}" srcset="{{ contributor.primaryImage.1x }}, {{ contributor.primaryImage.2x }} 2x, {{ contributor.primaryImage.3x }} 3x" alt="{{ contributor.name }}" /> #}
			    		</figure>
		    			<strong class="contributor-name"><a href="{{paths.root}}about#{{ contributor.slug }}">{{ contributor.name }}</strong>
		    			<span class="contributor.role">{{ contributor.role }}</span>
			    	</a>
			    {% endfor %}
			</div>
		</div>
		
		{% set relatedrecords = record.related('news') %}
        {% if relatedrecords is not empty %}
		    <div class="slice">
			    <h3 class="slice-hook">What’s been written about this project?</h3>
			    <div class="slice-main">
				    {% for newsItem in relatedrecords %}
				    	<a class="news-item" href="{{ newsItem.news_link }}">
				    		<div class="news-item-category">{{ newsItem.category }}</div>
				    		<div class="news-item-content">
				    			<strong class="news-item-title">{{ newsItem.title }}</strong>
				    			<span class="news-item-date">{{ newsItem.date }}</span>
				    			{% if newsItem.publication|length %}
				    				<span class="news-item-publication">{{ newsItem.publication }}</span>
				    			{% endif %}
				    		</div>
				    	</a>
				    {% endfor %}
				</div>
			</div>
		{% endif %}

{% endblock %}